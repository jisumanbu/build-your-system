---
description: "[Organize] 刷新 Dashboard - 更新统计、趋势、洞察数据"
---

刷新 Dashboard.md 的静态数据区块（统计、趋势、洞察）。

**当前目录就是 Vault**，使用相对路径。

## 执行流程

### 1. 分析 Claude Code 活动数据

运行 Python 脚本获取今日活动统计：

!`python3 "${CLAUDE_PLUGIN_ROOT}/scripts/analyze-cc-activity.py"`

**提取数据**：
- 活动时段（开始-结束时间）
- 消息总数
- 会话数量
- 领域分布

### 2. 提取最新 AI 洞察

从 `60-Memory/patterns.md` 读取最新 3 条洞察：
- 日期和标题
- 标签
- 核心内容摘要（前 100 字）

### 3. 生成本周统计区块

**格式**：

```markdown
**生成时间**：{YYYY-MM-DD HH:MM}

### 工作时间分布

| 指标 | 数值 | 备注 |
|------|------|------|
| 活动时段 | {开始} - {结束} | {时长} |
| 消息总数 | {N} 条 | Claude Code 对话 |
| 活跃会话 | {N} 个 | 会话数量 |

### 领域投入

| 领域 | 任务数 | 占比 |
|------|--------|------|
| #media | {N} | {%} |
| #indie | {N} | {%} |
| #outsourcing | {N} | {%} |
```

### 4. 生成趋势区块

**统计近 7 天数据**（如果有历史数据）：

```markdown
| 日期 | 活动时长 | 消息数 | 主要领域 | MIT 完成率 |
|------|----------|--------|----------|-----------|
| {日期1} | {时长} | {消息} | {领域} | {完成率} |
| ... | ... | ... | ... | ... |
```

**注意**：如果没有历史数据，显示"暂无历史数据，请每日运行 /o-review 积累数据"。

### 5. 生成洞察区块

**格式**：

```markdown
### 本周关键发现

**{洞察标题1}** ({日期})
> {内容摘要，100字以内}

**{洞察标题2}** ({日期})
> {内容摘要}

**{洞察标题3}** ({日期})
> {内容摘要}

📖 完整洞察：[[60-Memory/patterns]]
```

### 6. 更新 Dashboard.md

1. 读取 `Dashboard.md`
2. 替换标记区块的内容（使用 Obsidian `%%` 注释语法）：
   - `%% DASHBOARD_STATS_START %%` 到 `%% DASHBOARD_STATS_END %%`
   - `%% DASHBOARD_TRENDS_START %%` 到 `%% DASHBOARD_TRENDS_END %%`
3. 保存文件

### 7. 反馈用户

```
✅ Dashboard 已刷新！

📊 今日数据：
- 活动时段：{开始} - {结束}
- 消息总数：{N} 条
- 主要领域：{领域}

💡 最新洞察：{洞察标题}

🔗 打开 Dashboard 查看完整数据
```

---

## 注意事项
- 不修改 Dataview 查询区块（它们是实时的）
- 只更新 `%% %%` 标记之间的静态内容
- 保持标记注释完整，确保下次能定位
- 如果 CC 活动脚本执行失败，显示错误信息但不中断

## 触发场景

- 用户手动执行 `/o-dashboard`
- 可选：`/o-review` 完成后自动触发
- 建议：每日回顾后执行一次
